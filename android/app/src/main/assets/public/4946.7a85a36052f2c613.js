"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4946],{4946:(E,h,c)=>{c.r(h),c.d(h,{Listapredict3PageModule:()=>k});var u=c(177),d=c(9417),a=c(4742),g=c(6766),p=c(7468),m=c(6354),t=c(4438),P=c(1626),b=c(6936);function F(s,l){if(1&s){const r=t.RV6();t.j41(0,"ion-row")(1,"ion-col",3),t.EFF(2),t.k0s(),t.j41(3,"ion-col",3),t.EFF(4),t.k0s(),t.j41(5,"ion-col",3),t.EFF(6),t.k0s(),t.j41(7,"ion-col",3),t.EFF(8),t.k0s(),t.j41(9,"ion-col",3),t.EFF(10),t.k0s(),t.j41(11,"ion-col",3),t.EFF(12),t.k0s(),t.j41(13,"ion-col",10)(14,"ion-button",11),t.bIt("click",function(){const o=t.eBV(r).$implicit,i=t.XpG();return t.Njj(i.eliminar(o.id_registro))}),t.EFF(15,"Eliminar"),t.k0s()()()}if(2&s){const r=l.$implicit;t.R7$(2),t.JRh(r.DNI),t.R7$(2),t.JRh(r.Nombres),t.R7$(2),t.JRh(r.Edad),t.R7$(2),t.JRh(r.Hmg),t.R7$(2),t.JRh(r.Fecha),t.R7$(2),t.JRh(r.Resultado)}}const f=[{path:"",component:(()=>{var s;class l{constructor(e,o,i,n){this.http=e,this.service=o,this.alertCtrl=i,this.toastController=n,this.datos=[],this.filteredDatos=[],this.paginatedDatos=[],this.searchTerm="",this.selectedDate="",this.currentPage=1,this.itemsPerPage=10,this.totalPages=1}ngOnInit(){this.obtenerDatos()}obtenerDatos(){this.http.get("https://backendjs-dee6d131d346.herokuapp.com/api/registros2/3").subscribe({next:e=>{const o=e.map(i=>this.http.get(`https://backendjs-dee6d131d346.herokuapp.com/api/pacientes/${i.id_paciente}`).pipe((0,m.T)(n=>({...i,DNI:(null==n?void 0:n.DNI)||"N/A",Nombres:n?`${n.Nombres} ${n.Apellidos}`:"N/A",Fecha:new Date(i.Fecha).toLocaleDateString(),Resultado:this.extraerResultado(i.Resultado)}))));(0,p.p)(o).subscribe({next:i=>{this.datos=i,this.filteredDatos=this.datos,this.totalPages=Math.ceil(this.filteredDatos.length/this.itemsPerPage),this.updatePaginatedDatos(),console.log("Datos recibidos:",this.datos)},error:i=>{console.error("Error al obtener los datos",i)}})},error:e=>{console.error("Error al obtener los datos",e)}})}extraerResultado(e){return e.includes("Grave")?"Grave":e.includes("Moderada")?"Moderada":e.includes("Leve")?"Leve":e.includes("No tiene anemia")?"NA":"-"}filterDatos(){this.filteredDatos=this.datos.filter(e=>{const o=Object.values(e).some(n=>String(n).toLowerCase().includes(this.searchTerm.toLowerCase())),i=!this.selectedDate||new Date(e.fecha).toLocaleDateString()===new Date(this.selectedDate).toLocaleDateString();return o&&i}),this.totalPages=Math.ceil(this.filteredDatos.length/this.itemsPerPage),this.currentPage=1,this.updatePaginatedDatos()}updatePaginatedDatos(){const e=(this.currentPage-1)*this.itemsPerPage;this.paginatedDatos=this.filteredDatos.slice(e,e+this.itemsPerPage)}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updatePaginatedDatos())}prevPage(){this.currentPage>1&&(this.currentPage--,this.updatePaginatedDatos())}eliminar(e){this.alertCtrl.create({header:"Eliminar",message:"\xbfEst\xe1 seguro de eliminar?"+e,buttons:[{text:"Si",handler:()=>{this.service.Borrar(e).subscribe(()=>{this.presentToast("Registro eliminado"),this.obtenerDatos()})}},{text:"NO"}]}).then(o=>o.present())}presentToast(e){this.toastController.create({message:e,duration:2e3}).then(o=>o.present())}}return(s=l).\u0275fac=function(e){return new(e||s)(t.rXU(P.Qq),t.rXU(b.C),t.rXU(a.hG),t.rXU(a.K_))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-listpredict3"]],decls:32,vars:4,consts:[[1,"custom-content"],["slot","start"],["defaultHref","tabs/tabs/tab1",1,"custom-back-button"],[2,"color","black"],[1,"custom-content",2,"color","black",3,"ngModelChange","ionInput","ngModel"],[1,"responsive-table"],[1,"header-row"],[4,"ngFor","ngForOf"],["slot","end"],[2,"color","black",3,"click","disabled"],[2,"justify-content","center"],["color","secondary",3,"click"]],template:function(e,o){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title",3),t.EFF(5,"Lista de predicciones de Grado de Severidad de la Anemia"),t.k0s()()(),t.j41(6,"ion-content",0)(7,"ion-searchbar",4),t.mxI("ngModelChange",function(n){return t.DH7(o.searchTerm,n)||(o.searchTerm=n),n}),t.bIt("ionInput",function(){return o.filterDatos()}),t.k0s(),t.j41(8,"ion-grid",5)(9,"ion-row",6)(10,"ion-col",3),t.EFF(11,"DNI"),t.k0s(),t.j41(12,"ion-col",3),t.EFF(13,"PACIENTE"),t.k0s(),t.j41(14,"ion-col",3),t.EFF(15,"EDAD"),t.k0s(),t.j41(16,"ion-col",3),t.EFF(17,"HMG"),t.k0s(),t.j41(18,"ion-col",3),t.EFF(19,"FECHA"),t.k0s(),t.j41(20,"ion-col",3),t.EFF(21,"GRADO DE SEVERIDAD"),t.k0s(),t.j41(22,"ion-col",3),t.EFF(23,"ACCIONES"),t.k0s()(),t.DNE(24,F,16,6,"ion-row",7),t.k0s(),t.j41(25,"ion-footer")(26,"ion-toolbar",0)(27,"ion-buttons",8)(28,"ion-button",9),t.bIt("click",function(){return o.prevPage()}),t.EFF(29,"Anterior"),t.k0s(),t.j41(30,"ion-button",9),t.bIt("click",function(){return o.nextPage()}),t.EFF(31,"Siguiente"),t.k0s()()()()()),2&e&&(t.R7$(7),t.R50("ngModel",o.searchTerm),t.R7$(17),t.Y8G("ngForOf",o.paginatedDatos),t.R7$(4),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("disabled",o.currentPage===o.totalPages))},dependencies:[u.Sq,d.BC,d.vS,a.Jm,a.QW,a.hU,a.W9,a.M0,a.lO,a.eU,a.ln,a.S1,a.BC,a.ai,a.Gw,a.el],styles:[".custom-content[_ngcontent-%COMP%] {\n    --background: white;\n  }\n  .custom-back-button[_ngcontent-%COMP%] {\n    --color: black;\n  }"]}),l})()}];let D=(()=>{var s;class l{}return(s=l).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[g.iI.forChild(f),g.iI]}),l})(),k=(()=>{var s;class l{}return(s=l).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[u.MD,d.YN,a.bv,D]}),l})()}}]);